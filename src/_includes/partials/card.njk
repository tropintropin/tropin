<article class="card {% if "events" in post.data.tags %}event-card{% else %}blog-card{% endif %}">
    {% if post.data.image %}
        <div class="card-image">
            <a href="{{ post.url }}">
                <img src="{{ post.data.image }}" alt="{{ post.data.title }}">
            </a>
        </div>
    {% endif %}

    <div class="card-content">
        <h2 class="card-title">
        <a href="{{ post.url }}">{{ post.data.title }}</a>
        </h2>

        {# === EVENTS === #}
        {% if "events" in post.data.tags %}
        {% if post.date %}
            <p class="event-date">
            {{ post.date | date("dd.MM.yyyy HH:mm") }}
            {% if post.data.end %}
                → {{ post.data.end | date("HH:mm") }}
            {% endif %}
            </p>
        {% endif %}

        {% if post.data.location and post.data.location.name %}
            <p class="event-location">Место: {{ post.data.location.name }}</p>
        {% endif %}

        {% if post.data.organizer and post.data.organizer.name %}
            <p class="event-organizer">
            Организатор и подробности: 
            {% if post.data.organizer.url %}
                <a href="{{ post.data.organizer.url }}" target="_blank" rel="noopener">
                    {{ post.data.organizer.name }}
                </a>
                {% else %}
                {{ post.data.organizer.name }}
                {% endif %}
            </p>
        {% endif %}

        {# === BLOG === #}
        {% else %}
        {% if post.date %}
            <p class="card-date">
            {{ post.date | date("dd.MM.yyyy HH:mm") }}
            </p>
        {% endif %}
        {% endif %}

        {% set annotation = post.data.excerpt or post.templateContent | striptags | truncate(150, true) %}
        {% if annotation %}
        <p class="card-annotation">{{ annotation }}</p>
        {% endif %}
    </div>
</article>
